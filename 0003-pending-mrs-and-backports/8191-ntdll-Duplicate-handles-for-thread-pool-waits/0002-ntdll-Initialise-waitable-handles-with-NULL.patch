From 8a388ab0081a0007a8a440c47e92328b92e7fe18 Mon Sep 17 00:00:00 2001
From: Conor McCarthy <cmccarthy@codeweavers.com>
Date: Tue, 3 Jun 2025 14:49:17 +1000
Subject: [PATCH] ntdll: Initialise waitable handles with NULL.

All waitable objects use NULL as their invalid value.
---
 dlls/ntdll/threadpool.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/dlls/ntdll/threadpool.c b/dlls/ntdll/threadpool.c
index 81cf894d943..6448477a5cb 100644
--- a/dlls/ntdll/threadpool.c
+++ b/dlls/ntdll/threadpool.c
@@ -1436,7 +1436,7 @@ static NTSTATUS tp_waitqueue_lock( struct threadpool_object *wait )
     wait->u.wait.bucket         = NULL;
     wait->u.wait.wait_pending   = FALSE;
     wait->u.wait.timeout        = 0;
-    wait->u.wait.handle         = INVALID_HANDLE_VALUE;
+    wait->u.wait.handle         = NULL;
 
     RtlEnterCriticalSection( &waitqueue.cs );
 
-- 
GitLab

